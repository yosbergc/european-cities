---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
import '../styles/global.css'
---

<header class="w-full bg-white border-b border-stone-100 sticky top-0 z-50">
  <div class="max-w-6xl mx-auto px-6 lg:px-8">
    <nav class="flex items-center justify-between h-16 lg:h-20">

      <!-- Logo / Site Title -->
      <a href="/" class="group flex items-center gap-2.5 no-underline">
        <span class="text-[10px] font-bold tracking-[0.3em] uppercase text-amber-500">
          EAT
        </span>
        <span class="w-px h-4 bg-stone-200"></span>
        <span class="font-serif text-xl font-bold text-stone-900 tracking-tight group-hover:text-amber-700 transition-colors duration-200">
          {SITE_TITLE}
        </span>
      </a>

      <!-- Desktop Nav Links -->
      <div class="hidden md:flex items-center gap-0.5">
        <HeaderLink href="/" class="nav-link">Home</HeaderLink>
      </div>

      <!-- Right: CTA + Mobile Menu -->
      <div class="flex items-center gap-4">
        <a
          href="#cities-grid"
          class="hidden md:inline-flex items-center gap-1.5 text-[12px] font-bold tracking-widest uppercase text-stone-900 border border-stone-900 px-4 py-2.5 hover:bg-stone-900 hover:text-white transition-all duration-200"
        >
          All Cities
        </a>

        <!-- Mobile hamburger -->
        <button
          id="menu-toggle"
          class="md:hidden flex flex-col gap-[5px] w-8 h-8 justify-center items-end"
          aria-label="Toggle menu"
        >
          <span class="menu-bar block h-px bg-stone-900 transition-all duration-300 w-8 origin-center"></span>
          <span class="menu-bar block h-px bg-stone-900 transition-all duration-300 w-5 origin-center"></span>
          <span class="menu-bar block h-px bg-stone-900 transition-all duration-300 w-8 origin-center"></span>
        </button>
      </div>
    </nav>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="hidden md:hidden border-t border-stone-100 bg-white"
  >
    <div class="max-w-6xl mx-auto px-6 py-8 flex flex-col gap-1">
      <a href="/" class="block text-2xl font-serif font-bold text-stone-800 py-2 hover:text-amber-600 transition-colors no-underline">Home</a>
      <div class="mt-6 pt-6 border-t border-stone-100">
        <a
          href="#cities-grid"
          class="inline-flex text-[12px] font-bold tracking-widest uppercase text-stone-900 border border-stone-900 px-5 py-3 hover:bg-stone-900 hover:text-white transition-all duration-200 no-underline"
        >
          Explore All Cities â†’
        </a>
      </div>
    </div>
  </div>
</header>

<style>
  :global(.nav-link) {
    display: inline-block;
    font-size: 13px;
    font-weight: 500;
    letter-spacing: 0.05em;
    color: #78716c;
    padding: 8px 14px;
    text-decoration: none;
    position: relative;
    transition: color 0.15s;
  }
  :global(.nav-link:hover) {
    color: #1c1917;
  }
  :global(a[href].active),
  :global(a[aria-current="page"].nav-link) {
    color: #1c1917;
  }
  :global(a[aria-current="page"].nav-link::after) {
    content: '';
    position: absolute;
    bottom: 4px;
    left: 14px;
    right: 14px;
    height: 1px;
    background: #f59e0b;
  }
</style>

<script>
  const toggle = document.getElementById('menu-toggle');
  const menu = document.getElementById('mobile-menu');
  const bars = document.querySelectorAll<HTMLElement>('.menu-bar');

  toggle?.addEventListener('click', () => {
    const isOpen = !menu?.classList.contains('hidden');
    menu?.classList.toggle('hidden', isOpen);
    if (!isOpen) {
      bars[0].style.transform = 'rotate(45deg) translateY(6px)';
      bars[1].style.opacity = '0';
      bars[2].style.transform = 'rotate(-45deg) translateY(-6px)';
    } else {
      bars[0].style.transform = '';
      bars[1].style.opacity = '';
      bars[2].style.transform = '';
    }
  });
</script>